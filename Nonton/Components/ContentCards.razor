@inject NavigationManager NavigationManager
@inject IJSRuntime JsRuntime

<MudText Typo="Typo.body1">@CatalogName</MudText>

<section class="no-scrollbar content-cards-container" id="content-container-@CatalogName">
    @foreach (var meta in Metas)
    {
        <div class="w-[150px] flex-none rounded snap-center snap-always" @onclick="() => ViewDetail(meta.ImdbId!)">
            <div class="d-flex flex-column" style="place-items: center;">
                <MudImage Src="@meta.Poster" Width="145" Height="250" Elevation="25" Class="rounded-lg ma-4 cursor-pointer" ObjectFit="ObjectFit.Cover"></MudImage>
                <span style="text-align: center">@meta.Name (@meta.Year)</span>
            </div>
        </div>
    }
</section>

@code {
    [Parameter]
    public string? CatalogName { get; set; }

    [Parameter]
    public IEnumerable<Meta> Metas { get; set; } = null!;

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        await JsRuntime.InvokeVoidAsync("forceHorizontalScroll", $"content-container-{CatalogName}");
    }

    public async Task ViewDetail(string id)
    {
        await Task.Run(() => NavigationManager.NavigateTo($"detail/{id}"));
    }
}