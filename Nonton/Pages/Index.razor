@page "/"

<PageTitle>Discover</PageTitle>

<MudGrid Spacing="1" Justify="Justify.FlexStart">
    @if (DiscoverResult?.Metas is not null)
    {
        foreach (var meta in DiscoverResult.Metas)
        {
            <ContentItem Meta="meta"></ContentItem>
        }
    }
</MudGrid>

@code {
    public IStremioApi StremioApi => RestService.For<IStremioApi>("https://v3-cinemeta.strem.io");
    public Discover? DiscoverResult { get; set; }

    protected override async Task OnInitializedAsync()
    {
        DiscoverResult = await StremioApi.GetTopMovies();
        StateHasChanged();
    }
}